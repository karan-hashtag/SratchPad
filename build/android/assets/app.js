Titanium.UI.setBackgroundColor("white");var PENCILTHICKNESS=10,RUBBERTHICKNESS=40,menuView=Ti.UI.createView({backgroundColor:"black",width:Ti.UI.FILL,height:Ti.UI.FILL});menuData=[{title:"Pencil",leftImage:"images/pencilToolSelected.png",textColor:"white",backgroundColor:"black",className:"menu"},{title:"Eraser",leftImage:"images/eraserTool.png",textColor:"black",backgroundColor:"white",className:"menu"},{title:"New",leftImage:"images/newImage.png",textColor:"black",backgroundColor:"white",className:"menu"},{title:"Save",leftImage:"images/saveImage.png",textColor:"black",backgroundColor:"white",className:"menu"},{title:"About Me",leftImage:"images/aboutMe.png",textColor:"black",backgroundColor:"white",className:"menu"}],rowData=[];for(var i=0;i<menuData.length;i++){var img=Ti.UI.createImageView({image:menuData[i].leftImage,top:"15dp",height:"72dp",touchEnabled:!1}),label=Ti.UI.createLabel({text:menuData[i].title,font:{fontsize:48},bottom:"15dp",color:menuData[i].textColor,touchEnabled:!1}),row=Ti.UI.createTableViewRow({height:"130dp",backgroundColor:menuData[i].backgroundColor,backgroundSelectedColor:"black",className:menuData[i].className});row.add(img),row.add(label),row.add(Ti.UI.createView({height:1,width:Ti.UI.FILL,backgroundColor:"black",bottom:0})),rowData.push(row)}var menuTable=Ti.UI.createTableView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"black",data:rowData});menuTable.addEventListener("click",function(e){switch(e.index){case 0:paint.eraseMode=!1,paint.strokeWidth=PENCILTHICKNESS,menuTable.data[0].rows[0].children[0].image="images/pencilToolSelected.png",menuTable.data[0].rows[0].backgroundColor="black",menuTable.data[0].rows[0].children[1].color="white",menuTable.data[0].rows[1].children[0].image="images/eraserTool.png",menuTable.data[0].rows[1].backgroundColor="white",menuTable.data[0].rows[1].children[1].color="black",selectedTool.image="images/pencilTool.png";break;case 1:paint.eraseMode=!0,paint.strokeWidth=RUBBERTHICKNESS,menuTable.data[0].rows[0].children[0].image="images/pencilTool.png",menuTable.data[0].rows[0].backgroundColor="white",menuTable.data[0].rows[0].children[1].color="black",menuTable.data[0].rows[1].children[0].image="images/eraserToolSelected.png",menuTable.data[0].rows[1].backgroundColor="black",menuTable.data[0].rows[1].children[1].color="white",selectedTool.image="images/eraserTool.png";break;case 2:paint.clear();break;case 3:var a=paint.toImage().media,i="image.png",t="",r=Ti.Platform.osname;if("android"==r){t="file:///storage/emulated/0/";var o=Ti.Filesystem.getFile(t,"Paint It")}else var o=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"Paint It");o.exists()||o.createDirectory();var l=Titanium.Filesystem.getFile(o.resolve(),i);if(l.write(a),"android"==r)Ti.Media.Android.scanMediaFiles([l.nativePath],["image/png"]);else{var n=Ti.FileSystem.getFile(Ti.Filesystem.applicationDataDirectory+i);Ti.Media.saveToPhotoGallery(n)}break;case 4:alert("Created by Hashtag (Karan)")}}),menuView.add(menuTable);var paintView=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"white"}),Paint=require("ti.paint"),paint=Paint.createPaintView({left:0,top:0,width:"100%",height:"100%",backgroundColor:"white",strokeColor:"#000",strokeAlpha:255,strokeWidth:PENCILTHICKNESS,eraseMode:!1}),selectedTool=Ti.UI.createImageView({image:"images/pencilTool.png",width:"50dp",height:"50dp",top:"15dp",right:"15dp"}),animateSelectedTool=function(e){var a=Ti.UI.create2DMatrix();a="clockwise"==e?a.rotate(0,360):a.rotate(360,0);var i=Ti.UI.createAnimation({transform:a,duration:500});selectedTool.animate(i)};selectedTool.addEventListener("click",function(){thicknessSliderPencil.visible||thicknessSliderRubber.visible?(thicknessSliderPencil.hide(),thicknessSliderRubber.hide(),animateSelectedTool("anticlockwise")):0==paint.eraseMode?(thicknessSliderPencil.show(),animateSelectedTool("clockwise")):(thicknessSliderRubber.show(),animateSelectedTool("clockwise"))});var t=Titanium.UI.create2DMatrix();t=t.rotate(-90),thicknessSliderRubber=Titanium.UI.createSlider({min:0,max:100,value:RUBBERTHICKNESS,width:"150dp",height:Ti.UI.SIZE,top:"120dp",right:"-39dp",transform:t,visible:!1}),thicknessSliderPencil=Titanium.UI.createSlider({min:0,max:50,value:PENCILTHICKNESS,width:"150dp",height:Ti.UI.SIZE,top:"120dp",right:"-39dp",transform:t,visible:!1}),thicknessSliderRubber.addEventListener("change",function(e){paint.strokeWidth=RUBBERTHICKNESS=e.value}),thicknessSliderPencil.addEventListener("change",function(e){paint.strokeWidth=PENCILTHICKNESS=e.value});var openMenu=Ti.UI.createImageView({image:"images/menuAndMore.png",width:"50dp",height:"32dp",bottom:"15dp",left:"15dp"});openMenu.addEventListener("click",function(){drawer.toggleLeftWindow()}),paintView.add(paint),paintView.add(selectedTool),paintView.add(thicknessSliderRubber),paintView.add(thicknessSliderPencil),paintView.add(openMenu);var NappDrawer=require("dk.napp.drawer"),drawer=NappDrawer.createDrawer({backgroundColor:"white",fullscreen:!1,navBarHidden:!0,leftWindow:menuView,centerWindow:paintView,fading:.2,parallaxAmount:.3,shadowWidth:"30dp",leftDrawerWidth:"130dp",animationMode:NappDrawer.ANIMATION_NONE,closeDrawerGestureMode:NappDrawer.CLOSE_MODE_MARGIN,openDrawerGestureMode:NappDrawer.OPEN_MODE_NONE,orientationModes:[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT]});drawer.open();